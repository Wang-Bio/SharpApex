# How to generate a circular organ shape ?

This tutorial will tell you how to do a circular organ morphogenesis. 

## Preparation
1. Try Hello World in C++ and CMake. Please follow the tutorials in [0 C++ and CMake](0%20C++%20and%20CMake.md). 
2. Download the codes [here](https://github.com/Wang-Zinin/plant_vertex_model)). Click the Green button "Code", choose "Download ZIP". Extract the zip in the desired directory. 
3. Open the ubuntu/macOS terminal. Then use "ls" and "cd" command to navigate to the directory with extracted codes. 

## Input Modification
We will choose the normal 61 cells (61cells.txt) as our initial primordia.

* For mode.txt: please use "simulation" for the "major_mode" and "single" for the "minor_mode". 
* For parameter.txt: please use "area" for the "division_control", "random" for the "in_division_diretion", "anticlinal" for the "epi_division_direction". 
* Keep other parameter as the default value: sigma_L=0.5; sigma_O=2.0; kappa_S=1.0; S_std=3.5; delta_time=0.005; eta=1.0; standard_cell_period_length=500; F_apparent=0.25; T_division_check=100000; T_vtkoutput=100000; T_cell_time=10000; end_cell_number=1000; step_end=2000000000; lower_limit=0.3; slope=5

## Conduct Simulation
1. now the terminal's working directory should be Directory/plant_vertex_model-main
2. create a new file directory and do compling there:
```
mkdir build
cd build
cmake ..
make
```
3. a executable file named "2dv" should be generated by the step 2. Execute the "2dv" file by:
```
./2dv
```
4. the simulation starts. Logs and information of the simulation will be printed on the terminal. The simulation might cost tens of minute or hours, corresponding to your computer's CPU performance. 
   Currently the codes can only use single-core. The parallel programming might be developed in the future.
6. Wait till the simulation terminates. (You may get a rest or do other job during simulation)

## Interpret and Analyze Output
In the simulation directory (it is "build" file folder, if you follow the 2nd step), there are:
* vtk files, which records the vertices position and cells/lines connection of every 10,000 simulation steps
* divisionRecord.txt, which records the divided cell information (eg., time, position, index...), divided angles, and divided frequency. 
* GeometricsRecord.txt, which records the geometrics of organ (eg., area, perimeter, circularity, regularity, ...)
* simulationLog.txt, which records the simulation start time and termination time (real system time, hours and dates)
* parameterRecord.txt, which simply records the input parameters. 

To visualize simulation results, please download ParaView, an open-source visualization software. 
For ubuntu users, the command is: 
```
sudo apt install paraview
```
For mac users, the command is:
```
homebrew install paraview
```

To check if ParaView has successfully installed, please use the command:
```
paraview --version
```
You can use ParaView to visualize the results. To open ParaView, use command:
```
paraview
```
To visualize the vtk files
* Click File -> Open in the upper task bar, or press ctrl+O 
* Open the "2dv_line..vtk" and "2dv_cell..vtk" in the windows. Then the visualization of the initial stage (61 cells) should show in the RenderView.
* Choose the "2dv_line00*" in the Pipeline Browser. In the Properties -> Coloring, choose "Solid Color" to replace "Current Length". 
* Choose the "2dv_cell00*" in the Pipeline Browser. In the Properties -> Coloring -> cell_division_count, choose "Rescale to custom range", enter the range "0 - 5".
* Click "Play" in the upper bar, then the animation will start. You will see a circular organ grow into a larger circular organ. 


